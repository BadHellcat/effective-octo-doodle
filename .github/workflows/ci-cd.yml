name: CI/CD\n\non:\n  push:\n    branches:\n      - main\n  release:\n    types:\n      - published\n\njobs:\n  publish:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v2\n      - name: Build Docker image\n        run: docker build . -t my-app\n      - name: Push Docker image\n        if: startsWith(github.ref, 'refs/tags/')\n        run: docker push my-app\n\n  deploy:\n    runs-on: ubuntu-latest\n    needs: publish\n    steps:\n      - name: Deploy to production\n        run: ./deploy.sh\n